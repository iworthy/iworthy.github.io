(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{423:function(t,s,a){"use strict";a.r(s);var n=a(12),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"frp的安装和配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#frp的安装和配置"}},[t._v("#")]),t._v(" FRP的安装和配置")]),t._v(" "),s("h2",{attrs:{id:"frp-是什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#frp-是什么"}},[t._v("#")]),t._v(" frp 是什么？")]),t._v(" "),s("p",[t._v("frp 是一个专注于内网穿透的高性能的反向代理应用，支持 TCP、UDP、HTTP、HTTPS 等多种协议。可以将内网服务以安全、便捷的方式通过具有公网 IP 节点的中转暴露到公网。")]),t._v(" "),s("h2",{attrs:{id:"下载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载"}},[t._v("#")]),t._v(" 下载")]),t._v(" "),s("p",[t._v("目前可以在 Github 的 "),s("a",{attrs:{href:"https://github.com/fatedier/frp/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("Release"),s("OutboundLink")],1),t._v(" 页面中下载到最新版本的客户端和服务端二进制文件，所有文件被打包在一个压缩包中。")]),t._v(" "),s("h2",{attrs:{id:"部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[t._v("#")]),t._v(" 部署")]),t._v(" "),s("p",[t._v("解压缩下载的压缩包，将其中的 frpc 拷贝到内网服务所在的机器上，将 frps 拷贝到具有公网 IP 的机器上，放置在任意目录。")]),t._v(" "),s("h2",{attrs:{id:"开始使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开始使用"}},[t._v("#")]),t._v(" 开始使用！")]),t._v(" "),s("p",[t._v("编写配置文件，先通过 "),s("code",[t._v("./frps -c ./frps.ini")]),t._v(" 启动服务端，再通过 "),s("code",[t._v("./frpc -c ./frpc.ini")]),t._v(" 启动客户端。如果需要在后台长期运行，建议结合其他工具使用，例如 "),s("code",[t._v("systemd")]),t._v(" 和 "),s("code",[t._v("supervisor")]),t._v("。")]),t._v(" "),s("p",[t._v("如果是 Windows 用户，需要在 cmd 终端中执行命令。")]),t._v(" "),s("h2",{attrs:{id:"代理类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代理类型"}},[t._v("#")]),t._v(" 代理类型")]),t._v(" "),s("p",[t._v("frp 支持多种代理类型来适配不同的使用场景。")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("tcp")]),t._v(" "),s("td",[t._v("单纯的 TCP 端口映射，服务端会根据不同的端口路由到不同的内网服务。")])]),t._v(" "),s("tr",[s("td",[t._v("udp")]),t._v(" "),s("td",[t._v("单纯的 UDP 端口映射，服务端会根据不同的端口路由到不同的内网服务。")])]),t._v(" "),s("tr",[s("td",[t._v("http")]),t._v(" "),s("td",[t._v("针对 HTTP 应用定制了一些额外的功能，例如修改 Host Header，增加鉴权。")])]),t._v(" "),s("tr",[s("td",[t._v("https")]),t._v(" "),s("td",[t._v("针对 HTTPS 应用定制了一些额外的功能。")])]),t._v(" "),s("tr",[s("td",[t._v("stcp")]),t._v(" "),s("td",[t._v("安全的 TCP 内网代理，需要在被访问者和访问者的机器上都部署 frpc，不需要在服务端暴露端口。")])]),t._v(" "),s("tr",[s("td",[t._v("sudp")]),t._v(" "),s("td",[t._v("安全的 UDP 内网代理，需要在被访问者和访问者的机器上都部署 frpc，不需要在服务端暴露端口。")])]),t._v(" "),s("tr",[s("td",[t._v("xtcp")]),t._v(" "),s("td",[t._v("点对点内网穿透代理，功能同 stcp，但是流量不需要经过服务器中转。")])]),t._v(" "),s("tr",[s("td",[t._v("tcpmux")]),t._v(" "),s("td",[t._v("支持服务端 TCP 端口的多路复用，通过同一个端口访问不同的内网服务。")])])])]),t._v(" "),s("h1",{attrs:{id:"通过-ssh-访问内网机器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过-ssh-访问内网机器"}},[t._v("#")]),t._v(" 通过 SSH 访问内网机器")]),t._v(" "),s("p",[t._v("这个示例通过简单配置 TCP 类型的代理让用户访问到内网的服务器。")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("在具有公网 IP 的机器上部署 frps，修改 frps.ini 文件，这里使用了最简化的配置，设置了 frp 服务器用户接收客户端连接的端口：")]),t._v(" "),s("div",{staticClass:"language-ini line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("common")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("bind_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("7000")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("在需要被访问的内网机器上（SSH 服务通常监听在 22 端口）部署 frpc，修改 frpc.ini 文件，假设 frps 所在服务器的公网 IP 为 x.x.x.x：")]),t._v(" "),s("div",{staticClass:"language-ini line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("common")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server_addr")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("x.x.x.x")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("7000")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("ssh")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("tcp")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("local_ip")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("local_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("22")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("remote_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("6000")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("p",[s("code",[t._v("local_ip")]),t._v(" 和 "),s("code",[t._v("local_port")]),t._v(" 配置为本地需要暴露到公网的服务地址和端口。"),s("code",[t._v("remote_port")]),t._v(" 表示在 frp 服务端监听的端口，访问此端口的流量将会被转发到本地服务对应的端口。")])]),t._v(" "),s("li",[s("p",[t._v("分别启动 frps 和 frpc。")])]),t._v(" "),s("li",[s("p",[t._v("通过 SSH 访问内网机器，假设用户名为 test：")]),t._v(" "),s("p",[s("code",[t._v("ssh -oPort=6000 test@x.x.x.x")])]),t._v(" "),s("p",[t._v("frp 会将请求 "),s("code",[t._v("x.x.x.x:6000")]),t._v(" 的流量转发到内网机器的 22 端口。")])])]),t._v(" "),s("h1",{attrs:{id:"通过自定义域名访问内网的-web-服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过自定义域名访问内网的-web-服务"}},[t._v("#")]),t._v(" 通过自定义域名访问内网的 Web 服务")]),t._v(" "),s("p",[t._v("这个示例通过简单配置 HTTP 类型的代理让用户访问到内网的 Web 服务。")]),t._v(" "),s("p",[t._v("HTTP 类型的代理相比于 TCP 类型，不仅在服务端只需要监听一个额外的端口 "),s("code",[t._v("vhost_http_port")]),t._v(" 用于接收 HTTP 请求，还额外提供了基于 HTTP 协议的诸多功能。")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("修改 frps.ini 文件，设置监听 HTTP 请求端口为 8080：")]),t._v(" "),s("div",{staticClass:"language-ini line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("common")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("bind_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("7000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("vhost_http_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("8080")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("修改 frpc.ini 文件，假设 frps 所在的服务器的 IP 为 x.x.x.x，"),s("code",[t._v("local_port")]),t._v(" 为本地机器上 Web 服务监听的端口, 绑定自定义域名为 "),s("code",[t._v("custom_domains")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-ini line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("common")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server_addr")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("x.x.x.x")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("7000")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("web")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("http")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("local_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("80")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("custom_domains")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("www.yourdomain.com")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("web2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("http")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("local_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("8080")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("custom_domains")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("www.yourdomain2.com")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("分别启动 frps 和 frpc。")])]),t._v(" "),s("li",[s("p",[t._v("将 "),s("code",[t._v("www.yourdomain.com")]),t._v(" 和 "),s("code",[t._v("www.yourdomain2.com")]),t._v(" 的域名 A 记录解析到 IP "),s("code",[t._v("x.x.x.x")]),t._v("，如果服务器已经有对应的域名，也可以将 CNAME 记录解析到服务器原先的域名。或者可以通过修改 HTTP 请求的 Host 字段来实现同样的效果。")])]),t._v(" "),s("li",[s("p",[t._v("通过浏览器访问 "),s("code",[t._v("http://www.yourdomain.com:8080")]),t._v(" 即可访问到处于内网机器上 80 端口的服务，访问 "),s("code",[t._v("http://www.yourdomain2.com:8080")]),t._v(" 则访问到内网机器上 8080 端口的服务。")])])]),t._v(" "),s("h1",{attrs:{id:"安全地暴露内网服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安全地暴露内网服务"}},[t._v("#")]),t._v(" 安全地暴露内网服务")]),t._v(" "),s("p",[t._v("这个示例将会创建一个只有自己能访问到的 SSH 服务代理。")]),t._v(" "),s("p",[t._v("对于某些服务来说如果直接暴露于公网上将会存在安全隐患。")]),t._v(" "),s("p",[t._v("使用 "),s("code",[t._v("stcp(secret tcp)")]),t._v(" 类型的代理可以避免让任何人都能访问到要穿透的服务，但是访问者也需要运行另外一个 frpc 客户端。")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("frps.ini 内容如下：")]),t._v(" "),s("div",{staticClass:"language-ini line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("common")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("bind_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("7000")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("在需要暴露到内网的机器上部署 frpc，且配置如下：")]),t._v(" "),s("div",{staticClass:"language-ini line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("common")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server_addr")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("x.x.x.x")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("7000")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("secret_ssh")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("stcp")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 只有 sk 一致的用户才能访问到此服务")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("sk")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("abcdefg")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("local_ip")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("local_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("22")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("在想要访问内网服务的机器上也部署 frpc，且配置如下：")]),t._v(" "),s("div",{staticClass:"language-ini line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("common")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server_addr")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("x.x.x.x")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("7000")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("secret_ssh_visitor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("stcp")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# stcp 的访问者")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("role")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("visitor")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 要访问的 stcp 代理的名字")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server_name")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("secret_ssh")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("sk")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("abcdefg")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 绑定本地端口用于访问 SSH 服务")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("bind_addr")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("127.0.0.1")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("bind_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("6000")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br")])])]),t._v(" "),s("li",[s("p",[t._v("通过 SSH 访问内网机器，假设用户名为 test：")]),t._v(" "),s("p",[s("code",[t._v("ssh -oPort=6000 test@127.0.0.1")])])])]),t._v(" "),s("h1",{attrs:{id:"对外提供简单的文件访问服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对外提供简单的文件访问服务"}},[t._v("#")]),t._v(" 对外提供简单的文件访问服务")]),t._v(" "),s("p",[t._v("通过 "),s("code",[t._v("static_file")]),t._v(" 插件可以对外提供一个简单的基于 HTTP 的文件访问服务。")]),t._v(" "),s("p",[t._v("启动 frpc，启用 "),s("code",[t._v("static_file")]),t._v(" 插件，配置如下：")]),t._v(" "),s("div",{staticClass:"language-ini line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# frpc.ini")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("common")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server_addr")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("x.x.x.x")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("7000")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("test_static_file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("tcp")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("remote_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("6000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("plugin")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("static_file")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 要对外暴露的文件目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("plugin_local_path")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("/tmp/file")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 访问 url 中会被去除的前缀，保留的内容即为要访问的文件路径")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("plugin_strip_prefix")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("static")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("plugin_http_user")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("abc")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("plugin_http_passwd")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("abc")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br")])]),s("p",[t._v("通过浏览器访问 "),s("code",[t._v("http://x.x.x.x:6000/static/")]),t._v(" 来查看位于 "),s("code",[t._v("/tmp/file")]),t._v(" 目录下的文件，会要求输入已设置好的用户名和密码。")]),t._v(" "),s("h1",{attrs:{id:"通过-frpc-所在机器访问外网"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过-frpc-所在机器访问外网"}},[t._v("#")]),t._v(" 通过 frpc 所在机器访问外网")]),t._v(" "),s("p",[t._v("frpc 内置了 http proxy 和 socks5 插件，可以使其他机器通过 frpc 的网络访问互联网。")]),t._v(" "),s("p",[t._v("启动 frpc，启用 http_proxy 或 socks5 插件(plugin 换为 socks5 即可)， 配置如下：")]),t._v(" "),s("div",{staticClass:"language-ini line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# frpc.ini")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("common")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server_addr")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("x.x.x.x")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("server_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("7000")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("http_proxy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("tcp")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("remote_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("6000")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("plugin")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("http_proxy")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br")])]),s("p",[t._v("浏览器设置 http 或 socks5 代理地址为 "),s("code",[t._v("x.x.x.x:6000")]),t._v("，通过 frpc 机器的网络访问互联网。")]),t._v(" "),s("h1",{attrs:{id:"修改-host-header"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#修改-host-header"}},[t._v("#")]),t._v(" 修改 Host Header")]),t._v(" "),s("p",[t._v("通常情况下 frp 不会修改转发的任何数据。但有一些后端服务会根据 http 请求 header 中的 host 字段来展现不同的网站，例如 nginx 的虚拟主机服务，启用 host-header 的修改功能可以动态修改 http 请求中的 host 字段。该功能仅限于 http 类型的代理。")]),t._v(" "),s("div",{staticClass:"language-ini line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# frpc.ini")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("web")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("http")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("local_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("80")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("custom_domains")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("test.yourdomain.com")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("host_header_rewrite")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("dev.yourdomain.com")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])]),s("p",[t._v("原来 http 请求中的 host 字段 "),s("code",[t._v("test.yourdomain.com")]),t._v(" 转发到后端服务时会被替换为 "),s("code",[t._v("dev.yourdomain.com")]),t._v("。")]),t._v(" "),s("h1",{attrs:{id:"通过密码保护你的-web-服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过密码保护你的-web-服务"}},[t._v("#")]),t._v(" 通过密码保护你的 web 服务")]),t._v(" "),s("p",[t._v("由于所有客户端共用一个 frps 的 http 服务端口，任何知道你的域名和 url 的人都能访问到你部署在内网的 web 服务，但是在某些场景下需要确保只有限定的用户才能访问。")]),t._v(" "),s("p",[t._v("frp 支持通过 HTTP Basic Auth 来保护你的 web 服务，使用户需要通过用户名和密码才能访问到你的服务。")]),t._v(" "),s("p",[t._v("该功能目前仅限于 http 类型的代理，需要在 frpc 的代理配置中添加用户名和密码的设置。")]),t._v(" "),s("div",{staticClass:"language-ini line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# frpc.ini")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("web")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("http")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("local_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("80")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("custom_domains")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("test.yourdomain.com")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("http_user")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("abc")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("http_pwd")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("abc")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])]),s("p",[t._v("通过浏览器访问 "),s("code",[t._v("http://test.yourdomain.com")]),t._v("，需要输入配置的用户名和密码才能访问。")]),t._v(" "),s("h1",{attrs:{id:"自定义二级域名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义二级域名"}},[t._v("#")]),t._v(" 自定义二级域名")]),t._v(" "),s("p",[t._v("在多人同时使用一个 frps 时，通过自定义二级域名的方式来使用会更加方便。")]),t._v(" "),s("p",[t._v("通过在 frps 的配置文件中配置 "),s("code",[t._v("subdomain_host")]),t._v("，就可以启用该特性。之后在 frpc 的 http、https 类型的代理中可以不配置 "),s("code",[t._v("custom_domains")]),t._v("，而是配置一个 "),s("code",[t._v("subdomain")]),t._v(" 参数。")]),t._v(" "),s("p",[t._v("只需要将 "),s("code",[t._v("*.{subdomain_host}")]),t._v(" 解析到 frps 所在服务器。之后用户可以通过 "),s("code",[t._v("subdomain")]),t._v(" 自行指定自己的 web 服务所需要使用的二级域名，通过 "),s("code",[t._v("{subdomain}.{subdomain_host}")]),t._v(" 来访问自己的 web 服务。")]),t._v(" "),s("div",{staticClass:"language-ini line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# frps.ini")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("common")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("subdomain_host")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("frps.com")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("将泛域名 "),s("code",[t._v("*.frps.com")]),t._v(" 解析到 frps 所在服务器的 IP 地址。")]),t._v(" "),s("div",{staticClass:"language-ini line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# frpc.ini")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token section"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("web")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("http")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("local_port")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("80")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("subdomain")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("test")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("frps 和 fprc 都启动成功后，通过 "),s("code",[t._v("test.frps.com")]),t._v(" 就可以访问到内网的 web 服务。")]),t._v(" "),s("p",[t._v("需要注意的是如果 frps 配置了 "),s("code",[t._v("subdomain_host")]),t._v("，则 "),s("code",[t._v("custom_domains")]),t._v(" 中不能是属于 "),s("code",[t._v("subdomain_host")]),t._v(" 的子域名或者泛域名。")]),t._v(" "),s("p",[t._v("同一个 http 或 https 类型的代理中 "),s("code",[t._v("custom_domains")]),t._v(" 和 "),s("code",[t._v("subdomain")]),t._v(" 可以同时配置。")]),t._v(" "),s("h1",{attrs:{id:"相关链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#相关链接"}},[t._v("#")]),t._v(" 相关链接")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://gofrp.org/docs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("FRP中文文档"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.cnblogs.com/sanduzxcvbnm/p/8508741.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("frp官方中文文档cnblogs"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=e.exports}}]);