(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{456:function(t,e,a){"use strict";a.r(e);var s=a(12),n=Object(s.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("网站配置HTTPS是非常普遍的事情，Let's Encrypt 新推出了泛域名证书，申请一个，解决了需要申请一堆单域名的苦恼。")]),t._v(" "),e("h2",{attrs:{id:"申请方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#申请方法"}},[t._v("#")]),t._v(" 申请方法")]),t._v(" "),e("blockquote",[e("p",[t._v("本文相关内容参考自"),e("a",{attrs:{href:"http://www.laozuo.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("老左博客"),e("OutboundLink")],1),t._v("，"),e("a",{attrs:{href:"https://www.cnblogs.com/tinywan/p/8573169.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Tinywan"),e("OutboundLink")],1),t._v("。\n###利用阿里云，DNSPOD API 自动验证签发证书\n1.安装必要的软件包")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("yum update && yum install curl -y && yum install cron -y && yum install socat -y\n")])])]),e("p",[t._v("2.安装acme.sh")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("curl https://get.acme.sh | sh\n")])])]),e("p",[t._v("3.输入相关API\nAliyun:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v('export Ali_Key=""\nexport Ali_Secret=""\n')])])]),e("p",[t._v("DNSPOD:")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v('export DP_Id=""\nexport DP_Key=""\n')])])]),e("p",[t._v("4.签发证书SSL\nAliyun：\n~/.acme.sh/acme.sh --issue -d worthy.top -d *.worthy.top --dns dns_ali\n~/.acme.sh/acme.sh --issue -d wasim.win -d *.wasim.win --dns dns_ali\nDNSPOD：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("~/.acme.sh/acme.sh --issue -d worthy.cc -d *.worthy.cc --dns dns_dp\n~/.acme.sh/acme.sh --issue -d iworthy.cc -d *.iworthy.cc --dns dns_dp\n")])])]),e("p",[t._v("5.等待配置完成即可，证书文件都被自动存放在/root/.acme.sh/对应的域名文件夹中。")]),t._v(" "),e("p",[t._v("###手动解析申请\n1.获取certbot-auto")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v("# 下载\nwget https://dl.eff.org/certbot-auto\n  \n# 设为可执行权限\nchmod u+x certbot-auto\n")])])]),e("p",[t._v("2.开始申请证书")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[t._v('sudo ./certbot-auto --server https://acme-v02.api.letsencrypt.org/directory -d "*.tinywan.top" --manual --preferred-challenges dns-01 certonly\n')])])]),e("p",[t._v("这步需要输入邮箱和相关确认")]),t._v(" "),e("p",[t._v("3.DNS解析 TXT\n申请通配符证书是要经过DNS认证的，按照提示，前往域名后台添加对应的DNS TXT记录。")]),t._v(" "),e("p",[t._v("4.回车确认，等待完成。\n配置证书存放在 /etc/letsencrypt/live/tinywan.top/ 里面了，执行 certbot-auto renew 就可以续期。")]),t._v(" "),e("h2",{attrs:{id:"科普知识"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#科普知识"}},[t._v("#")]),t._v(" 科普知识")]),t._v(" "),e("p",[t._v("###HTTPS\nHTTPS（全称：Hyper Text Transfer Protocol over Secure Socket Layer），是以安全为目标的HTTP通道，简单讲是HTTP的安全版。即HTTP下加入SSL层，HTTPS的安全基础是SSL，因此加密的详细内容就需要SSL。 它是一个URI scheme（抽象标识符体系），句法类同http:体系。用于安全的HTTP数据传输。https:URL表明它使用了HTTP，但HTTPS存在不同于HTTP的默认端口及一个加密/身份验证层（在HTTP与TCP之间）。这个系统的最初研发由网景公司(Netscape)进行，并内置于其浏览器Netscape Navigator中，提供了身份验证与加密通讯方法。现在它被广泛用于万维网上安全敏感的通讯，例如交易支付方面。\n###SSL\nSSL(Secure Sockets Layer 安全套接层),及其继任者传输层安全（Transport Layer Security，TLS）是为网络通信提供安全及数据完整性的一种安全协议。TLS与SSL在传输层对网络连接进行加密。\n###CA证书\nCA 也拥有一个证书（内含公钥和私钥）。网上的公众用户通过验证 CA 的签字从而信任 CA ，任何人都可以得到 CA 的证书（含公钥），用以验证它所签发的证书。\n如果用户想得到一份属于自己的证书，他应先向 CA 提出申请。在 CA 判明申请者的身份后，便为他分配一个公钥，并且 CA 将该公钥与申请者的身份信息绑在一起，并为之签字后，便形成证书发给申请者。\n如果一个用户想鉴别另一个证书的真伪，他就用 CA 的公钥对那个证书上的签字进行验证，一旦验证通过，该证书就被认为是有效的。证书实际是由证书签证机关（CA）签发的对用户的公钥的认证。\n证书的内容包括：电子签证机关的信息、公钥用户信息、公钥、权威机构的签字和有效期等等。目前，证书的格式和验证方法普遍遵循X.509 国际标准。\n###Let's Encrypt\nLet's Encrypt是一个于2015年三季度推出的数字证书认证机构，旨在以自动化流程消除手动创建和安装证书的复杂流程，并推广使万维网服务器的加密连接无所不在，为安全网站提供免费的SSL/TLS证书。\nLet's Encrypt由互联网安全研究小组（缩写ISRG）提供服务。主要赞助商包括电子前哨基金会、Mozilla基金会、Akamai以及思科。2015年4月9日，ISRG与Linux基金会宣布合作。")]),t._v(" "),e("p",[t._v("###相关链接")]),t._v(" "),e("ol",[e("li",[e("a",{attrs:{href:"https://github.com/Neilpang/acme.sh",target:"_blank",rel:"noopener noreferrer"}},[t._v("An ACME Shell script: acme.sh"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=n.exports}}]);