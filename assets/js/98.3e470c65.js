(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{480:function(s,t,a){"use strict";a.r(t);var e=a(12),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"腾讯云命令行工具-tccli"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#腾讯云命令行工具-tccli"}},[s._v("#")]),s._v(" 腾讯云命令行工具 TCCLI")]),s._v(" "),t("p",[s._v("TCCLI 是管理腾讯云资源的统一工具。通过腾讯云命令行工具，您可以快速轻松的调用腾讯云 API 来管理您的腾讯云资源。您还可以基于 TCCLI 来做自动化和脚本处理，能够以更多样的方式进行组合和重用。")]),s._v(" "),t("h2",{attrs:{id:"安装-tccli"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-tccli"}},[s._v("#")]),s._v(" 安装 TCCLI")]),s._v(" "),t("p",[s._v("注：安装命令行工具前请确保您的系统已经安装了 Python 环境和 pip 工具。")]),s._v(" "),t("p",[s._v("腾讯云官网教程上Mac OS 系统可以使用 Homebrew 进行安装，但实测M1芯片安装是失败的。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://alist.worthy.cc/d/local/images/2024/202403242358837.webp",alt:"截屏2024-03-24 23.57.49"}})]),s._v(" "),t("p",[s._v("根据GitHub上的回答I worked around this problem by "),t("code",[s._v("pip3 install tccli")]),s._v("继而采用pip3来安装。")]),s._v(" "),t("div",{staticClass:"language-sh line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# brew通过brew安装python")]),s._v("\nbrew "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" python@3.9\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装pip3")]),s._v("\npython3 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" ensurepip "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--upgrade")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 安装tccli")]),s._v("\npip3 "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" tccli\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("安装完后提示了警告信息并且控制台输入"),t("code",[s._v("tccli")]),s._v("命令会提示command not find。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("Installing collected packages: jmespath, tccli\n  WARNING: The scripts tccli and tccli_completer are installed in '/Users/worthy/Library/Python/3.9/bin' which is not on PATH.\n  Consider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.\nSuccessfully installed jmespath-0.10.0 tccli-3.0.1082.1\nWARNING: You are using pip version 21.2.4; however, version 24.0 is available.\nYou should consider upgrading via the '/Library/Developer/CommandLineTools/usr/bin/python3 -m pip install --upgrade pip' command.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("参照提示信息是没有配置PATH，于是在.zshrc文件添加一行，然后执行"),t("code",[s._v("source .zshrc")]),s._v("，在执行"),t("code",[s._v("tccli")]),s._v("就正确返回提示内容了。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/Users/worthy/Library/Python/3.9/bin:"),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"tccli-配置方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tccli-配置方法"}},[s._v("#")]),s._v(" TCCLI 配置方法")]),s._v(" "),t("p",[s._v("使用 TCCLI 前您需要进行一些初始化配置，使其完成使用云 API 的必要前提条件。")]),s._v(" "),t("h4",{attrs:{id:"交互模式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#交互模式"}},[s._v("#")]),s._v(" 交互模式")]),s._v(" "),t("p",[s._v("通过执行 "),t("code",[s._v("tccli configure")]),s._v(" 命令进入交互模式快速配置。")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("$ tccli configure\nTencentCloud API secretId [*afcQ]:AKIDz8krbsJ5yKBZQpn74WFkmLPx3*******\nTencentCloud API secretKey [*ArFd]:Gu5t9xGARNpq86cd98joQYCN3*******\nregion: ap-guangzhou\noutput[json]:\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[t("strong",[s._v("说明：")])]),s._v(" "),t("ul",[t("li",[t("p",[t("strong",[s._v("secretId")]),s._v("：云 API 密钥 SecretId，前往 "),t("a",{attrs:{href:"https://console.cloud.tencent.com/cam/capi",target:"_blank",rel:"noopener noreferrer"}},[s._v("API 密钥管理"),t("OutboundLink")],1),s._v(" 获取。")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("secretKey")]),s._v("：云 API 密钥 SecretKey，前往 "),t("a",{attrs:{href:"https://console.cloud.tencent.com/cam/capi",target:"_blank",rel:"noopener noreferrer"}},[s._v("API 密钥管理"),t("OutboundLink")],1),s._v(" 获取。")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("region")]),s._v("： 云产品地域，请前往对应云产品的 "),t("a",{attrs:{href:"https://cloud.tencent.com/document/api",target:"_blank",rel:"noopener noreferrer"}},[s._v("API 文档"),t("OutboundLink")],1),s._v(" 获取可用的 region。例如云服务器的 "),t("a",{attrs:{href:"https://cloud.tencent.com/document/api/213/15692#.E5.9C.B0.E5.9F.9F.E5.88.97.E8.A1.A8",target:"_blank",rel:"noopener noreferrer"}},[s._v("地域列表"),t("OutboundLink")],1),s._v("。")])]),s._v(" "),t("li",[t("p",[t("strong",[s._v("output")]),s._v("：可选参数，请求返回包输出格式，支持 [json table text] 三种格式，默认为 json。更多信息请执行 "),t("code",[s._v("tccli configure help")]),s._v(" 查看。")])])]),s._v(" "),t("h4",{attrs:{id:"tccli-配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tccli-配置文件"}},[s._v("#")]),s._v(" TCCLI 配置文件")]),s._v(" "),t("p",[s._v("使用 "),t("code",[s._v("tccli configure")]),s._v(" 命令后，TCCLI 会在 "),t("code",[s._v("~/.tccli")]),s._v(" 目录下生成对应的 "),t("code",[s._v("default.configure")]),s._v(" 和 "),t("code",[s._v("default.credential")]),s._v(" 文件，这两个文件记录均为 JSON 格式的内容。 "),t("code",[s._v("default.configure")]),s._v(" 记录对应产品调用的版本（默认最新版）和 endpoint（默认为最近接入点），以及默认的输出格式和指定的地域。 "),t("code",[s._v("default.credential")]),s._v(" 则记录的是用户的密钥信息。 示例如下：")]),s._v(" "),t("div",{staticClass:"language-json line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[s._v("# default.configure文件格式，cvm产品默认调用版本 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("-03")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("-12")]),s._v(" 的接口，默认的请求域名为 cvm.tencentcloudapi.com\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n ...\n "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"cvm"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"endpoint"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cvm.tencentcloudapi.com"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"version"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2017-03-12"')]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n ...\n "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"output"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"json"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"region"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ap-guanzhou"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n ...\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n# default.credential的文件格式\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"secretId"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"AKIDz8krbsJ5yKBZQpn74WFkmLPx3*******"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"secretKey"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Gu5t9xGARNpq86cd98joQYCN3*******"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("h2",{attrs:{id:"tccli-使用方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tccli-使用方法"}},[s._v("#")]),s._v(" TCCLI 使用方法")]),s._v(" "),t("p",[s._v("TCCLI 集成了腾讯云所有支持云 API 的产品，您可以在命令行下完成对腾讯云产品的配置和管理。包括使用 TCCLI 创建云服务器、操作云服务器、通过 TCCLI 创建云硬盘、查看云硬盘使用情况、通过 TCCLI 创建私有网络、往私有网络中添加资源等，所有在控制台页面能完成的操作，均能在 TCCLI 上执行命令实现。")]),s._v(" "),t("p",[s._v("我主要是使用TCCLI来快速修改安全组，使本机的IP在安全组上放行所有端口。具体的命令可以在API Explorer里配置好所需参数，然后在CLI示例中复制命令即可。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://alist.worthy.cc/d/local/images/2024/202403250020024.webp",alt:"截屏2024-03-25 00.20.50"}})]),s._v(" "),t("h2",{attrs:{id:"使用示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用示例"}},[s._v("#")]),s._v(" 使用示例")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("response")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://members.3322.org/dyndns/getip"')]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\ntccli vpc ReplaceSecurityGroupPolicies --cli-unfold-argument "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--region")]),s._v(" ap-beijing "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--SecurityGroupId")]),s._v(" sg-xxxxxxxx "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--SecurityGroupPolicySet.Ingress.0.PolicyIndex")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--SecurityGroupPolicySet.Ingress.0.Protocol")]),s._v(" ALL "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--SecurityGroupPolicySet.Ingress.0.Port")]),s._v(" ALL "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--SecurityGroupPolicySet.Ingress.0.CidrBlock")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$response")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--SecurityGroupPolicySet.Ingress.0.Action")]),s._v(" ACCEPT\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$response")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);